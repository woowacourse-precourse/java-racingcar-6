# 자동차 경주
---

## 구현 전 고려해야할 사항
* 최대한 스프링 프레임워크 구조와 비슷하게 만들자 (+MVC)
* git flow을 사용하자(fork 레포는 이슈를 사용못하는거같지만 브런치 네이밍을 최대한 활용)
* TDD 방식의 테스트 코드를 작성해보자
---

## 구현 예상 순서
* 개발전 메모하며 고민한 결과 스타트 클레스 - 컨트롤러 - 모델 - 서비스 - 뷰로 페키지를 나누어 개발하기로 계획 했다.
* 스타트 클레스 : main에서 단 하나의 함수로 프로그램을 시작한다.
* 컨트롤러 : 유저의 입력을 받으며 각종 검증을 한후에 연산이 끝난 결과를 뷰로 넘겨준다.
* 모델: 유저가 입력한 데이터를 가지고있는 역할을 맡을것이고 입력받은 string을 분리등을 맡는다.
* 서비스 : 가공된 데이터를 이용해서 반복수행같은 역할을 맡을 것이다.
* 뷰 : print등의 출력을 담당할것이다.

* 스타트 클레스 - 컨트롤러 - 모델 - 서비스 - 뷰 순서로 개발할거같다.

### 스타트 클레스 생성
스프링의 경우 `SpringApplication.run()` 으로 main함수가 시작 하기에 이를 사용해보려 한다. 

### 컨트롤러 (유저 입력 기능 )
처음 데이터를 받는 객체를 DTO를 사용할것인지는 제작하면서 확인

DTO 사용하는것이 초반 개발단계에서도 오히려 편함

TDD방식 테스트코드 작성중 문제 발견 : 클레스단위 테스트의 경우 가상 입력이 두번째 `@test` 단위부터 입력이 안되는 현상 추후 해결

> 자바 테스트에서 모든 입력을 한번에 미리 넣어줬어야 했습니다. 그래서 `@order` 를 사용해서 순서를 미리 확정한후에 그에 맞게 기본 테스트 값을 입력 해두었습니다.

반복실행을 컨트롤러 단에서 맡게 되었습니다. 한번의 루프마다 view가 출력되야해서 서비스 단에서 작업하다 mvc패턴을 위반하여 리펙토링 하였습니다.

### 모델 (데이터 저장, 가공)
데이터를 저장하는 객체를 domain으로 많이 사용하여 페키지 명을 `domain` 으로 하였습니다.

내부의 값변화는 해당 클레스 안에서만 가능하게 만들어 캡슐화를 하였습니다.

### 서비스
실질적으로 도메인클레스의 생성과 함수실행을 담당하고있습니다.

### 뷰 (출력)
sout을 담당하는 클레스로 최종 출력 함수들은 모두 뷰에서 구현하였습니다.

---

## 후기

스스로 mvc 패턴 + 레이어드 아키텍처를 적용해보았는데

처음에는 프레임워크도 아닌데 이렇게 작업해야하나 생각이 들었습니다만 빼먹은 예외처리, 리펙토링 등을 수정하면서 "아 내가 이걸 빼먹었으니 여기 클레스에다 마저 작업하면 되겠다" 하는 확실한 폴더정리가 되서 편안했습니다.

역시 유지보수를 위해서는 이런 패턴적용이 유용하겠구나 하고 생각이 들었습니다.

더불어 완성한 후에 생각이 든것인데 스프링 프레임워크의 경우 유효한 핵심 함수들은 `@GetMapping("/")` `@Transactional` 등의 표시로 무엇이 핵심인지 보기가 편했는데 서버 프레임워크가 아닌 그냥 작업하려니 함수가 많아지고 너무 햇갈렸던거같습니다. 

다음 미션에서는 인터페이스를 사용해서 핵심 함수들에는 `@Override` 어노테이션이 붙도록 만들어야겠고 된다면 `DI`(Dependency Injection)를 사용할 수 있도록 구현해봐야겠습니다.
